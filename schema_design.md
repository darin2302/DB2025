# ПРОЕКТ БАЗА ДАННИ - МАГАЗИН

## 1. ЗАДАНИЕ

Да се проектира и реализира база от данни за МАГАЗИН, която да съхранява следната информация:

### Данни:
- **Продукт**: наименование, група, цена
- **Служител**: име, позиция, телефон
- **Клиент**: име, телефон
- **Продажба**: продукти (множество), клиент, служител, дата, цени

### Правила:
- Всеки продукт принадлежи на една група
- Всеки служител заема една позиция/длъжност
- Всеки клиент може да закупи много продукти
- Всяка продажба може да съдържа много продукти (кошница)

### Функционалности:
1. Въвеждане и корекции на данни
2. Търсене/закупуване на продукти по: цена, наименование, група
3. Справки за:
   - Продажби за период
   - Продажби за служител, подредени по дата
   - Продажби за клиент
   - Оборот и брой продажби по група за период
   - Топ продукти по оборот за период

---

## 2. КОНЦЕПТУАЛЕН МОДЕЛ (ER ДИАГРАМА)

### Ентитети и Атрибути:

#### PRODUCT_GROUP (Група продукти)
- **group_id** (PK) - уникален идентификатор
- group_name - наименование на групата

#### PRODUCT (Продукт)
- **product_id** (PK) - уникален идентификатор
- product_name - наименование на продукта
- group_id (FK) - връзка към група
- price - цена

#### POSITION (Позиция/Длъжност)
- **position_id** (PK) - уникален идентификатор
- position_name - наименование на длъжността

#### EMPLOYEE (Служител)
- **employee_id** (PK) - уникален идентификатор
- employee_name - име
- position_id (FK) - връзка към позиция
- phone - телефон

#### CLIENT (Клиент)
- **client_id** (PK) - уникален идентификатор
- client_name - име
- phone - телефон

#### SALE (Продажба - заглавна част)
- **sale_id** (PK) - уникален идентификатор
- client_id (FK) - връзка към клиент
- employee_id (FK) - връзка към служител
- sale_date - дата на продажбата

#### SALE_ITEM (Артикул в продажба)
- **sale_item_id** (PK) - уникален идентификатор
- sale_id (FK) - връзка към продажба
- product_id (FK) - връзка към продукт
- quantity - количество
- unit_price - единична цена (към момента на продажбата)

### Релации:

```
PRODUCT_GROUP (1) ----< (M) PRODUCT
    |
    | 1:M релация (една група има много продукти)

POSITION (1) ----< (M) EMPLOYEE
    |
    | 1:M релация (една позиция може да се заема от много служители)

CLIENT (1) ----< (M) SALE
    |
    | 1:M релация (един клиент прави много покупки)

EMPLOYEE (1) ----< (M) SALE
    |
    | 1:M релация (един служител обслужва много продажби)

SALE (1) ----< (M) SALE_ITEM
    |
    | 1:M релация (една продажба съдържа много артикули)

PRODUCT (1) ----< (M) SALE_ITEM
    |
    | 1:M релация (един продукт участва в много продажби)
```

---

## 3. ЛОГИЧЕСКИ МОДЕЛ

Моделът е нормализиран до Трета Нормална Форма (3NF):

### Първа нормална форма (1NF):
✓ Всички атрибути са атомарни
✓ Няма повтарящи се групи

### Втора нормална форма (2NF):
✓ Всички неключови атрибути зависят изцяло от първичния ключ

### Трета нормална форма (3NF):
✓ Няма транзитивни зависимости
✓ Групата на продукта е изнесена в отделна таблица
✓ Позицията на служителя е изнесена в отделна таблица
✓ Артикулите на продажбата са изнесени в отделна таблица SALE_ITEM
✓ Цената в SALE_ITEM се запазва за исторически данни

---

## 4. ФИЗИЧЕСКИ МОДЕЛ

Вижте файловете:
- `ddl_create_tables.sql` - DDL команди за създаване
- `dml_sample_data.sql` - Примерни данни
- `queries.sql` - SQL заявки за справки
- `diagrams/schema.dbml` - DBML схема за dbdiagram.io
